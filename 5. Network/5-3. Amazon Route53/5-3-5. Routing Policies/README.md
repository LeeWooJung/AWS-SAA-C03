# [Routing Policies](https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/routing-policy.html)

## Routing Policies

AWS Route 53은 여러 라우팅 정책을 제공하여 다양한 트래픽 관리 요구를 충족할 수 있음.

## Failover (Active-Passive)

### 개요
* **Failover 라우팅 정책**은 기본(Primary) 리소스가 사용할 수 없을 때 대체(Secondary) 리소스로 트래픽을 라우팅.  
* 이 정책은 **고가용성**을 보장하기 위해 사용.

### 작동 방식
* **Primary 리소스**  
주 리소스는 정상적인 경우 트래픽을 처리.
* **Secondary 리소스**  
주 리소스가 실패하면 트래픽이 대체 리소스로 전환.
* **헬스 체크**  
Route 53 헬스 체크를 설정하여 리소스의 상태를 모니터링.  
헬스 체크 실패 시 트래픽이 자동으로 Secondary 리소스로 전환.
### 사용 사례
* 주요 웹 사이트가 다운될 때 대체 사이트로 트래픽을 전환
* 데이터베이스 마스터-슬레이브 설정에서 마스터 장애 시 슬레이브로 전환

## Geolocation Routing

### 개요
**Geolocation 라우팅 정책**은 **사용자의 위치**(예: 국가, 대륙, IP 주소)( latency-based와 다름)에 따라 트래픽을 라우팅.

### 작동 방식
* **위치 기반 라우팅**  
각 위치(국가, 대륙 등)에 대해 별도의 리소스를 설정.
* **기본 위치**  
지정된 위치에 해당하지 않는 요청은 **기본 리소스(반드시 설정 되어야 함)**로 라우팅됨.

### 사용 사례
* 지역별 콘텐츠 제공 (예: 각 지역에 최적화된 웹 사이트)
* 법적 또는 규제 요구 사항에 따른 지역별 트래픽 관리

## Geoproximity Routing

### 개요
**Geoproximity 라우팅 정책**은 리소스와 사용자 간의 물리적 거리에 따라 트래픽을 라우팅.  
이는 리소스의 **가중치를 조정하여 특정 리소스에 더 많은 트래픽을 라우팅**할 수 있음.  
이 때, 리소스는 AWS Resource, Non-AWS Resource(Latitude, Longitude) 모두 가능.

### 작동 방식
* **거리 기반 라우팅**  
사용자의 위치와 리소스의 위치 간의 거리를 기준으로 트래픽을 라우팅.
* **바이아스 설정**  
리소스의 **가중치를 조정**하여 가까운 리소스 또는 특정 리소스로 더 많은 트래픽을 유도할 수 있음.

### 사용 사례
* 사용자와 가장 가까운 데이터 센터로 트래픽을 라우팅
* 특정 리소스에 더 많은 트래픽을 유도하여 부하 분산

## IP-based Routing

### 개요
**IP-based 라우팅 정책**은 사용자 요청의 소스 IP 주소에 따라 트래픽을 라우팅.  
주로 **VPN과 같은 특정 네트워크 환경**에서 사용.

### 작동 방식
* **CIDR 블록**  
특정 IP 주소 범위(CIDR 블록)를 기반으로 트래픽을 라우팅.
* **정책 매핑(Records)**  
지정된 IP 주소 범위와 리소스를 매핑합니다.

### 사용 사례
* 내부 네트워크 트래픽을 특정 서버로 라우팅
* VPN 사용자 트래픽을 특정 엔드포인트로 라우팅

## Multi-Value Routing
### 개요
**Multi-Value 라우팅 정책**은 여러 리소스에 대해 트래픽을 분산하여 부하를 분산하고 **가용성**을 높임.  
각 리소스에 대한 헬스 체크를 통해 사용 가능한 리소스에만 트래픽을 라우팅.  
**ELB의 대체제로 사용될 수 없음**.

### 작동 방식
* **여러 레코드 반환**  
하나의 도메인 이름에 대해 여러 IP 주소 또는 엔드포인트를 반환.
* **헬스 체크**  
각 리소스에 대해 헬스 체크를 설정하여 건강한 리소스에만 트래픽을 라우팅.

### 사용 사례
* 여러 웹 서버에 트래픽 분산
* 고가용성 애플리케이션 설정

## Summary

* 각 라우팅 정책은 특정 요구 사항과 사용 사례에 맞게 설계됨.  
* Failover는 고가용성을 보장  
* Geolocation과 Geoproximity는 위치 기반 트래픽 관리  
* IP-based 라우팅은 네트워크 환경별 트래픽 관리  
* Multi-Value는 부하 분산과 가용성 향상을 위함.  

AWS Route 53의 다양한 라우팅 정책을 활용하여 효과적인 트래픽 관리 전략을 구현할 수 있음.