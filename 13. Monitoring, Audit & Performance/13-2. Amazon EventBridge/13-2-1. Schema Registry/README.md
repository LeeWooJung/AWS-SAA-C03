# [Schema Registry](https://docs.aws.amazon.com/ko_kr/eventbridge/latest/userguide/eb-schema-registry.html)

Amazon EventBridge Schema Registry는 이벤트 구조(스키마)를 정의, 저장 및 관리하는 중앙 저장소임.

이는 **이벤트 데이터를 표준화하고, 개발자가 이벤트 구조를 쉽게 이해하고 사용할 수 있도록 도와줌**. 

Schema Registry는 **이벤트 스키마(Event Schema, 이벤트 데이터 형식을 정의한 것)를 자동으로 감지하고, 이를 중앙에서 관리하며, 이벤트를 생성하거나 이벤트 스키마를 처리하는 코드를 자동으로 생성**할 수 있게 함.

Schema Registry는 **스키마의 버전 관리를 지원하며, 이벤트 스키마의 변경 사항을 추적**할 수 있음.

## 특징

### 자동 스키마 등록

EventBridge는 **이벤트를 자동으로 감지하고, 이벤트 스키마를 자동으로 등록**할 수 있음.

### 스키마 관리

스키마를 중앙에서 관리하여 **일관성을 유지하고, 여러 팀이 동일한 스키마를 사용**할 수 있음.

### 코드 생성

**스키마를 기반으로 이벤트 처리 코드를 자동으로 생성**할 수 있음. 

이는 AWS SDK와 통합되어 다양한 언어를 지원함.

### 버전 관리

**스키마의 버전을 관리하여 변경 사항을 추적**하고, 과거 버전과의 호환성을 유지할 수 있음.

### 스키마 디스커버리

이벤트 소스에서 자동으로 스키마를 추출하고, 이를 개발자가 검색하고 사용할 수 있게 함.

## 구성요소

* **스키마**

    이벤트 데이터의 구조를 정의한 것임. 
    
    **JSON 형식으로 작성되며, 각 필드의 타입과 제약 조건을 포함**함.

* **스키마 레지스트리**

    스키마를 저장하고 관리하는 중앙 저장소임. 
    
    **여러 레지스트리를 생성하여 다양한 이벤트 소스를 관리**할 수 있음.

* **스키마 버전**

    스키마의 **변경 사항을 관리**하는 버전 정보임. 
    
    스키마가 변경될 때마다 새로운 버전이 생성됨.

* **코드 바인딩**

    스키마를 기반으로 **이벤트 처리 코드를 생성하는 기능**임. 
    
    AWS SDK와 통합되어 다양한 프로그래밍 언어를 지원함.

## 아키텍처

### 이벤트 감지

EventBridge는 이벤트를 감지하고, **이벤트 데이터를 분석하여 스키마를 추출**함.

### 스키마 등록

추출된 스키마는 Schema Registry에 자동으로 등록됨.

### 스키마 관리

관리자는 Schema Registry를 통해 스키마를 검색, 조회, 수정할 수 있음. 

**변경 사항은 새로운 버전으로 저장**됨.

### 코드 생성

개발자는 Schema Registry에서 스키마를 선택하고, 이를 기반으로 이벤트 처리 코드를 생성함.

### 이벤트 처리

생성된 코드는 **이벤트 데이터를 처리하고, 스키마에 정의된 구조를 준수**함.

## 장점

* **일관성 유지**

    중앙에서 스키마를 관리하여 이벤트 **데이터의 일관성을 유지**할 수 있음.

* **개발 효율성**

    스키마를 기반으로 코드를 자동 생성하여 개발 시간을 단축할 수 있음.

* **자동 감지**

    이벤트를 자동으로 감지하고 스키마를 추출하여 스키마 관리의 부담을 줄일 수 있음.

* **버전 관리**

    스키마의 버전을 관리하여 변경 사항을 추적하고, 호환성을 유지할 수 있음.

* **통합성**

    AWS SDK와 통합되어 다양한 프로그래밍 언어와 환경에서 사용할 수 있음.

## 단점

* **초기 설정 복잡성**

    Schema Registry를 설정하고 사용하는 초기 단계에서의 복잡성이 있을 수 있음.

* **비용**

    대규모 이벤트 데이터를 관리할 때 비용이 증가할 수 있음.

* **의존성**

    EventBridge와 Schema Registry에 대한 의존성이 생길 수 있음.

### Use case

* **이벤트 기반 아키텍처**

    마이크로서비스 간의 이벤트 통신에서 일관된 스키마를 사용하여 데이터 구조를 표준화함.

* **데이터 검증**

    이벤트 데이터의 구조를 사전에 정의하여 데이터 검증을 자동화함.

* **자동 코드 생성**
    
    이벤트 처리 코드를 자동으로 생성하여 개발 생산성을 향상시킴.

* **스키마 변경 관리**

    이벤트 스키마의 변경 사항을 추적하고, 버전 관리를 통해 호환성을 유지함.

## Summary

Amazon EventBridge Schema Registry는 **이벤트 구조를 정의하고 관리하는 중앙 저장소**로, **이벤트 데이터의 일관성을 유지하고 개발 생산성을 향상**시키는 서비스임. 

스키마를 자동으로 감지하고, 중앙에서 관리하며, 코드를 자동 생성할 수 있는 기능을 제공함. 

이를 통해 이벤트 기반 아키텍처에서 데이터 구조를 표준화하고, 실시간 데이터 처리를 간소화할 수 있음.