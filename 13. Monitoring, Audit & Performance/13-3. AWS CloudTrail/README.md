# [AWS CloudTrail](https://docs.aws.amazon.com/ko_kr/awscloudtrail/latest/userguide/cloudtrail-user-guide.html)

## <img src = "https://github.com/user-attachments/assets/79c248e3-0c30-4e80-b839-6adc75c6ce5a" width = "25" height = "25"> AWS CloudTrail

Amazon CloudTrail은 **AWS 계정 내의 API 호출을 추적하고 기록하는 서비스**임.

AWS 계정의 API 호출 기록을 **Console, SDK, CLI, AWS Services**를 이용하여 확인함.

이를 통해 **사용자의 활동과 API 요청 내역을 확인**할 수 있으며, **보안 분석, 리소스 변경 추적, AWS 계정에 대한 거버넌스/감사/규정 준수를 지원**함.

CloudTrail은 기본적으로 활성화되어 있음(default).

Resource가 삭제되었다면 **처음에는 바로 CloudTrail 부터 확인하는 것**이 좋음.

## 특징

### API 호출 기록

AWS 서비스 및 **계정 내의 API 호출을 자동으로 기록**함.

### 보안 감사

누가, 언제, 어떤 액션을 수행했는지에 대한 상세 정보를 제공함.

### 리소스 추적

**리소스의 생성, 수정, 삭제 등의 활동을 추적**할 수 있음.

### 로그 보관

CloudTrail 로그를 **S3 버킷에 저장**하여 장기 보관 및 분석이 가능함.

### 관리형 서비스

설정 및 관리가 용이하며, 자동으로 로그를 기록하고 전달함.

## 구성요소

* **Trail** (트레일)

    CloudTrail에서 **기록할 이벤트를 정의하는 설정 단위**임. 
    
    **단일 리전 또는 모든 리전(Default)에서 이벤트를 캡처하도록 설정**할 수 있음.

* **Event** (이벤트)

    CloudTrail이 기록하는 단위 작업임. 
    
    API 호출 및 그에 대한 응답이 포함됨.

* **S3 Bucket** (S3 버킷)

    CloudTrail 로그 파일이 저장되는 위치임.

* **CloudWatch Logs**

    실시간으로 이벤트를 모니터링하고 경보를 설정할 수 있음.

## 아키텍처

### API 호출

사용자가 AWS 서비스에 대한 API 호출을 수행함.

### 이벤트 캡처

CloudTrail이 해당 API 호출 이벤트를 캡처함.

### 로그 저장

캡처된 이벤트를 S3 버킷에 저장함.

### 로그 분석

저장된 로그를 CloudWatch Logs나 다른 분석 도구를 사용하여 분석함.


## 장점

* **보안 강화**

    사용자 활동을 추적하여 보안 위협을 감지하고 대응할 수 있음.

* **규정 준수**

    다양한 규정 준수 요구사항을 충족하기 위해 **사용자의 활동 내역을 기록하고 보관**할 수 있음.

* **리소스 관리**

    리소스 변경 내역을 추적하여 문제를 신속하게 파악하고 해결할 수 있음.

## 단점

* **비용**

    대량의 이벤트를 캡처하고 저장하는 데 따른 비용이 발생할 수 있음.

* **복잡성**

    대규모 환경에서 모든 이벤트를 관리하고 분석하는 것이 복잡할 수 있음.

* **지연**

    **이벤트 캡처와 로그 전달 간에 약간의 지연**이 발생할 수 있음.

## Use case

* **보안 감사**

    **AWS 계정 내의 모든 활동을 기록**하여 보안 침해 여부를 확인할 수 있음.

* **운영 문제 해결**

    **리소스 변경 내역을 추적하여 운영 문제를 신속하게 해결**s할 수 있음.

* **규정 준수**

    **PCI-DSS, HIPAA 등 다양한 규정 준수 요구사항을 충족**하기 위해 활동 내역을 기록하고 보관할 수 있음.

## Summary

Amazon CloudTrail은 **AWS 계정 내의 API 호출을 추적하고 기록하는 서비스로, 보안 분석, 리소스 변경 추적, 규정 준수를 지원**함. 

이를 통해 누가, 언제, 어떤 액션을 수행했는지에 대한 상세 정보를 제공하며, **로그를 S3 버킷에 저장하여 장기 보관 및 분석이 가능**함. 

**관리형 서비스**로서 설정 및 관리가 용이하지만, 대규모 환경에서의 비용 및 복잡성에 주의가 필요함.