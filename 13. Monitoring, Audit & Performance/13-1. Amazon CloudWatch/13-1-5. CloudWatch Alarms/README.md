# [CloudWatch Alarms](https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/AlarmThatSendsEmail.html)

## <img src = "https://github.com/user-attachments/assets/e662ed73-d65f-46fe-b3e9-8fc9af7a3dc7" width = "25" height = "25"> Amazon CloudWatch Alarms

Amazon CloudWatch Alarms는 **AWS에서 제공하는 모니터링 및 알림 서비스**임. 

사용자가 정의한 특정 조건을 기반으로 지표(metric)를 모니터링하고, **조건이 충족되면 알림을 보내거나 지정된 작업을 실행**함.

알림은 **이메일, SMS, Lambda 함수 호출, EC2 인스턴스 조정** 등 다양한 방식으로 전달될 수 있음.

CloudWatch Alarms를 통해 인프라 상태를 실시간으로 모니터링하고, 이상 징후에 신속하게 대응할 수 있음.


## 특징

### 지표 모니터링

AWS 리소스의 다양한 지표를 실시간으로 모니터링할 수 있음. 

예를 들어, **CPU 사용률, 메모리 사용량, 네트워크 트래픽 등을 모니터링**할 수 있음.

### 임계값 설정

**특정 지표에 대해 임계값을 설정하여, 지표가 이 값을 초과하거나 하회할 때 알림을 생성**할 수 있음.

### 다양한 알림 방법

**이메일, SMS, AWS Lambda, SNS 주제, EC2 Auto Scaling 등의 방법**으로 알림을 전달할 수 있음.

### 복잡한 알림 조건(Composite Alarms)

**단순한 임계값을 넘어서 여러 조건을 조합하여 복잡한 알림 조건을 설정**할 수 있음.

### 통합 관리

CloudWatch 대시보드를 통해 모든 알람을 중앙에서 관리하고 모니터링할 수 있음.

## 구성요소

* **지표**(Metric)

    모니터링할 데이터 포인트로, **CPU 사용률, 디스크 I/O, 네트워크 트래픽 등의 AWS 리소스 성능 지표**임.

* **임계값**(Threshold)

    알람이 트리거되는 기준값임. 
    
    지표가 이 값보다 높거나 낮으면 알람이 발생함.

* **알람 상태**(Alarm State)

    알람의 현재 상태로, **OK(정상), ALARM(임계값 초과), INSUFFICIENT_DATA(데이터 부족) 상태**로 나뉨.

* **알람 작업**(Actions)

    **알람이 트리거될 때 수행할 작업**으로, 이메일 알림, Lambda 함수 호출, EC2 인스턴스 조정 등이 있음.

## Targets

CloudWatch Alarm을 받은 Target은 다음과 같은 작업을 수행할 수 있음.

* **EC2**: Stop, Terminate, Reboot, or Recover 등을 수행함.

* **Auto Scaling**: EC2 등의 지표가 임계값을 하회하거나 상회하게 되면 **Auto Scaling**을 진행하여 자원을 효율적으로 관리함.

* **SNS**: Amazon SNS로 Alarm을 보내 많은 다른 AWS Service를 통해 여러 작업을 수행할 수 있음.

## Composite Alarms

CloudWatch Alarms는 하나의 메트릭(Single Metric)에 작동함.

**Composite Alarms**를 사용하여 여러 알람의 상태를 모니터링하고 관리할 수 있음.

즉, 여러 알람을 설정하고 해당 알람들의 **AND** , **OR** 조건을 설정하여 알람을 **복합적으로 관리**할 수 있음.

이와 같은 **복잡한 알림**을 사용하면, **알람의 Noise**를 줄일 수 있음.

## Metric Filters

알람은 **CloudWatch Logs Metric Filters**에 의해 **기본적으로** 생성됨.

### Architecture Example

![Alarm Architecture](https://github.com/user-attachments/assets/5d7ba73e-b673-4557-8c06-bc98ce0d873f)


## 아키텍처

### 지표 수집

CloudWatch는 AWS 리소스에서 다양한 지표를 수집함. 

예를 들어, EC2 인스턴스의 CPU 사용률을 모니터링함.

### 알람 설정

사용자는 CloudWatch 대시보드나 API를 통해 특정 지표에 대한 알람을 설정함. 

임계값과 알람 작업을 정의함.

### 상태 평가

CloudWatch는 **실시간으로 지표 데이터를 평가하여 알람 상태를 결정**함. 

지표가 임계값을 초과하면 알람 상태가 ALARM으로 변경됨.

### 알람 발생

알람 상태가 변경되면, 정의된 알람 작업이 실행됨. 

예를 들어, 이메일 알림이 발송되거나 Lambda 함수가 호출됨.

### 상태 변경

**지표가 다시 정상 범위로 돌아오면 알람 상태가 OK로 변경**됨. 

알람 작업이 완료됨.

## 장점

* **실시간 모니터링**

    AWS 리소스의 상태를 실시간으로 모니터링하여 빠르게 대응할 수 있음.

* **자동화된 대응**

    알람 발생 시 자동으로 작업을 실행하여 문제 해결을 자동화할 수 있음.

* **다양한 알림 방법**

    여러 가지 방법으로 알림을 받을 수 있어 유연한 대응이 가능함.

* **중앙 집중 관리**

    모든 알람을 CloudWatch 대시보드에서 중앙에서 관리하고 모니터링할 수 있음.

* **유연한 조건 설정**

    복잡한 조건을 설정하여 다양한 상황에 대응할 수 있음.

## 단점

* **비용**

    대규모 리소스 모니터링 및 알람 설정 시 비용이 발생할 수 있음.

* **설정 복잡성**

    다양한 조건을 설정하는 과정이 복잡할 수 있음. 
    
    특히, **복잡한 알람 조건을 설정할 때 신중**해야 함.

* **의존성**

    CloudWatch와 다른 AWS 서비스에 대한 의존성이 생길 수 있음.

## Use case

* **서버 성능 모니터링**

    EC2 인스턴스의 CPU 사용률, 메모리 사용량 등을 모니터링하여 임계값 초과 시 알림을 받음.

* **애플리케이션 가용성 확인**

    **애플리케이션의 지표를 모니터링하여 가용성 문제 발생 시 즉시 알림**을 받음.

* **자동 확장**

    EC2 인스턴스의 부하가 증가할 때 자동으로 인스턴스를 추가하거나 감소시켜, 자원 관리를 최적화함.

* **보안 모니터링**

    **보안 관련 지표를 모니터링하여 이상 징후 발생 시 알림을 받아 신속하게 대응**함.

## Summary

Amazon CloudWatch Alarms는 AWS 리소스의 지표를 실시간으로 모니터링하고, 사용자가 정의한 조건에 따라 알림을 생성하는 서비스임.

다양한 지표와 임계값을 설정할 수 있으며, 여러 방식으로 알림을 전달할 수 있음.

실시간 모니터링, 자동화된 대응, 다양한 알림 방법 등의 장점을 제공하며, 서버 성능 모니터링, 애플리케이션 가용성 확인, 자동 확장, 보안 모니터링 등 다양한 사용 사례에서 활용될 수 있음.