# [CloudWatch Logs Agent](https://docs.aws.amazon.com/ko_kr/AmazonCloudWatch/latest/logs/AgentReference.html)

Amazon CloudWatch Log Agent는 **AWS에서 제공하는 로그 관리 도구**임. 

서버에서 실행되는 에이전트 소프트웨어로, 시스템 로그, 애플리케이션 로그 등 다양한 로그 데이터를 수집하여 CloudWatch Logs에 전송함.

**EC2 인스턴스와 같은 서버에서 생성된 로그 데이터를 수집하여 Amazon CloudWatch Logs로 전송**함. 

이를 통해 로그 데이터를 한 곳에서 관리하고, 알림 설정, 지표 생성, 시각화 등을 할 수 있음.

**Agent의 Old Version**임.

Log를 **CloudWatch Logs**로만 전송할 수 있음.

## 특징

### 로그 수집 및 전송

서버에서 생성된 로그 파일을 실시간으로 수집하여 CloudWatch Logs로 전송함.

### 다양한 로그 소스 지원

**시스템 로그, 애플리케이션 로그, 사용자 정의 로그** 등 다양한 로그 소스를 지원함.

### 로그 필터링 및 처리

**로그 데이터를 필터링하고 필요한 형식으로 처리하여 전송**할 수 있음.

### 통합 모니터링

**CloudWatch 대시보드와 통합**되어 로그 데이터를 시각화하고, 경고 및 알림을 설정할 수 있음.

### 자동화된 배포

**AWS Systems Manager와 통합하여 에이전트 설치 및 구성을 자동화**할 수 있음.

## 구성요소

* **CloudWatch Logs**

    로그 데이터를 저장하고 관리하는 중앙 저장소임.

* **CloudWatch Log Agent**

    로그 데이터를 수집하여 CloudWatch Logs로 전송하는 에이전트 소프트웨어임.

* **로그 그룹**

    **유사한 로그 스트림을 그룹화하여 관리**함. 
    
    각 로그 그룹은 여러 로그 스트림을 포함할 수 있음.

* **로그 스트림**

    **단일 소스에서 생성된 일련의 로그 이벤트**임. 
    
    예를 들어, 특정 EC2 인스턴스에서 생성된 로그를 하나의 로그 스트림으로 관리함.

## 아키텍처

### 로그 수집

EC2 인스턴스에서 **CloudWatch Log Agent를 실행하여 로그 파일을 수집**함.

### 로그 전송

수집된 로그 데이터를 CloudWatch Logs로 전송함. 

로그 데이터는 지정된 **로그 그룹과 로그 스트림에 저장**됨.

### 로그 저장 및 분석

CloudWatch Logs에서 로그 데이터를 저장하고 분석할 수 있음. 

**필터를 설정하여 특정 이벤트를 모니터링**하고, 알림을 받을 수 있음.

### 시각화 및 알림

CloudWatch 대시보드를 사용하여 로그 데이터를 시각화하고, 경고 및 알림을 설정할 수 있음.

## 장점

* **중앙 집중 관리**

    여러 서버에서 생성된 로그 데이터를 중앙에서 관리할 수 있음.

* **실시간 모니터링**

    로그 데이터를 실시간으로 모니터링하고, 중요한 이벤트에 대해 즉시 알림을 받을 수 있음.

* **확장성**

    AWS 인프라의 확장성과 함께 대규모 로그 데이터를 처리할 수 있음.

* **통합된 시각화**

    CloudWatch 대시보드를 사용하여 로그 데이터를 통합적으로 시각화할 수 있음.

## 단점

* **비용**

    대량의 로그 데이터를 장기간 저장하면 비용이 증가할 수 있음.

* **설정 복잡성**

    에이전트 설치 및 설정 과정이 복잡할 수 있으며, 초기 설정에 시간이 소요될 수 있음.

* **네트워크 대역폭**

    로그 데이터를 전송하는 과정에서 **네트워크 대역폭을 소비**할 수 있음.

## Use case

* **애플리케이션 모니터링**

    웹 애플리케이션의 로그 데이터를 실시간으로 모니터링하고, 오류 발생 시 알림을 받을 수 있음.

* **보안 및 감사**

    시스템 로그를 분석하여 보안 이벤트를 감지하고, 규정 준수를 위한 감사 로그를 관리할 수 있음.

* **운영 문제 해결**

    서버의 시스템 로그를 분석하여 성능 문제나 장애를 신속하게 해결할 수 있음.

## With EC2 instance

CloudWatch만 사용했을 때는 EC2 인스턴스로부터 Log를 받을 수 없음.

**CloutWatch agent**를 EC2 인스턴스에 설치해야만, EC2 인스턴스에서 Log를 전송 가능함.

이 때, **IAM** Permission을 정확하게 설정해야 함.

CF. **CloudWatch Agent**는 On-Premise에도 설치 가능함.

## Summary

Amazon CloudWatch Log Agent는 **EC2 인스턴스와 같은 서버에서 생성된 로그 데이터를 수집하여 CloudWatch Logs로 전송하는 서비스**임. 

로그 데이터를 **중앙에서 모니터링하고, 분석하고, 시각화**할 수 있게 함. 

에이전트 설치 및 설정 과정은 다소 복잡할 수 있지만, 중앙 집중 관리, 실시간 모니터링, 확장성 등의 장점을 제공함. 

애플리케이션 모니터링, 보안 감사, 운영 문제 해결 등 다양한 사용 사례에서 유용하게 활용될 수 있음.