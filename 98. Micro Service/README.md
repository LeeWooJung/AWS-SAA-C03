# Micro Service

마이크로 서비스(Microservices)는 **단일 애플리케이션을 작은, 독립적으로 배포 가능한 서비스로 분해하는 소프트웨어 개발 방식**임.

각 마이크로 서비스는 특정 비즈니스 기능을 **독립적으로 수행**하며, 서로 **통신할 때는 주로 HTTP REST, 메시지 큐, 또는 gRPC와 같은 가벼운 통신 프로토콜**을 사용함.

각 서비스는 **자체 데이터 저장소**를 가질 수 있으며, **서로 다른 프로그래밍 언어와 기술 스택을 사용**할 수 있음.

## 주요 특징

* **독립적 배포**  
    각 서비스는 독립적으로 배포 및 확장할 수 있음.

* **작은 단위**  
    각 서비스는 작은 코드베이스로 유지관리와 테스트가 쉬움.

* **모듈화**  
    서비스 간 강한 모듈 경계를 유지하며, 잘 정의된 인터페이스를 통해 통신함.

* **팀 자율성**  
    각 서비스는 별도의 팀에서 독립적으로 개발 및 운영할 수 있음.

## 장점

* **확장성**  
    필요한 서비스만 독립적으로 확장할 수 있어 자원을 효율적으로 사용할 수 있음.

* **유지보수성**  
    작은 코드베이스로 인해 버그 수정, 기능 추가 등이 쉬움.

* **개발 속도 향상**  
    작은 팀들이 독립적으로 작업할 수 있어 개발 속도가 빨라짐.

## 단점

* **복잡성 증가**  
    서비스 간 통신, 데이터 일관성, 배포 파이프라인 등 관리해야 할 복잡성이 증가함.

* **배포 및 운영 부담**  
    여러 서비스의 배포와 모니터링이 필요하여 운영 부담이 커질 수 있음.

## with AWS Service(Synchronous)

### Amazon API Gateway

RESTful API와 WebSocket API를 제공하는 완전 관리형 서비스로, **클라이언트와 백엔드 서비스 간의 통신을 쉽게 설정**할 수 있음.

### AWS App Mesh  

마이크로 서비스 간 통신을 관리하는 서비스 **메쉬 솔루션**으로, 서비스 간의 트래픽 흐름을 제어하고 모니터링함.

### AWS Lambda  

서버리스 컴퓨팅 서비스로, 이벤트에 반응하여 코드를 실행할 수 있음.  

**API Gateway와 결합하여 동기식 호출을 처리**할 수 있음.

### Load Balancer

동기식 패턴에서 트래픽 분산과 가용성을 높이는 데 사용.

### 장점

* **실시간 상호작용**  
    클라이언트가 즉각적인 응답을 받을 수 있음.

* **단순한 설계**  
    요청-응답 모델로 인해 설계가 단순함.

### 단점

* **종속성 관리**  
    한 서비스의 실패가 다른 서비스에 영향을 미칠 수 있음.

* **확장성 제약**  
    모든 서비스가 동기식으로 응답해야 하므로 확장성에 제한이 있을 수 있음.


## with AWS Service(Asynchronous)

### Amazon SQS (Simple Queue Service)

메시지 큐 서비스로, **비동기적으로 메시지를 송수신**할 수 있음.  

서비스 간의 느슨한 결합을 지원함.

### Amazon SNS (Simple Notification Service)

메시지 전송 서비스로, 주로 **이벤트를 다른 서비스로 전달**하는 데 사용함.  

팬아웃(fan-out) 패턴을 지원함.

### AWS Step Functions  

**서버리스 함수와 마이크로 서비스의 워크플로우를 관리할 수 있는 서비스**로, 비동기식 작업을 쉽게 오케스트레이션 할 수 있음.

### Amazon EventBridge  

이벤트 중심 아키텍처를 지원하는 서비스로, 다양한 AWS 서비스와 타사 SaaS 애플리케이션 간의 이벤트를 라우팅하고 처리할 수 있음.

### Kinesis

비동기식 패턴에서 실시간 데이터 처리.

### Lambda triggers(S3)

이벤트 기반 작업을 자동화하는 데 사용.

### 장점

* **서비스 독립성**  
    서비스 간 강한 종속성이 없으므로 각 서비스가 독립적으로 동작할 수 있음.

* **확장성**  
    메시지 큐와 이벤트 기반 시스템으로 인해 높은 확장성을 지원함.

* **내결함성**  
    한 서비스의 실패가 전체 시스템에 큰 영향을 미치지 않음.

### 단점

* **복잡성 증가**  
    비동기 메시징 시스템을 설계하고 디버깅하는 데 추가적인 복잡성이 따름.

* **지연 시간**  
    비동기 통신으로 인해 응답 시간이 길어질 수 있음.

## 마이크로 서비스 아키텍처의 어려움

* **서비스 간 통신**  
    서비스 간의 통신을 안전하고 신뢰성 있게 설정하는 것이 어려움.

* **데이터 일관성**  
    분산된 데이터 저장소 간의 데이터 일관성을 유지하는 것이 복잡함.

* **배포 및 운영**  
    여러 서비스의 배포와 운영을 자동화하고 모니터링하는 것이 어려움.

* **오류 처리**  
    분산된 환경에서 오류를 추적하고 복구하는 것이 복잡함.

* **성능 모니터링**  
    서비스 간의 성능을 모니터링하고 최적화하는 것이 어려움.

* **오버헤드 증가**  
    각각의 새로운 마이크로 서비스가 생성됨에 따라 반복적인 오버헤드 증가.

* **최적화 문제**  
    마이크로 서버의 활용도, 밀도를 최적화 하는 문제 증가.

* **버전 컨트롤**  
    여러 버전의 여러 마이크로서비스를 동시에 실행하는데 따른 복잡성 증가.

* **통합의 어려움**  
    다양한 개별 서비스를 통합하길 원하는 클라이언트 측 코드 요구사항이 확산되지만, 통합이 어려움.


## Serverless 패턴으로 해결 방법

* **자동 확장**  
    AWS Lambda, DynamoDB와 같은 서버리스 서비스를 사용하여 자동 확장을 지원함.

* **관리형 서비스**  
    API Gateway, SQS, SNS와 같은 관리형 서비스를 사용하여 복잡한 인프라 관리를 피할 수 있음.

* **간편한 배포**  
    서버리스 프레임워크와 AWS SAM(Serverless Application Model)을 사용하여 배포를 자동화할 수 있음.

* **비용 절감**  
    서버리스 아키텍처는 사용한 만큼만 비용을 지불하는 모델로 비용을 절감할 수 있음.

* **개발 속도 향상**  
    서버리스 서비스를 사용하면 인프라 관리에 대한 부담이 줄어들어 개발 속도가 향상됨.

## Summary

마이크로 서비스 아키텍처는 **확장성과 유지보수성을 향상**시키지만, **복잡성 증가와 운영 부담을 초래**함. 

이를 해결하기 위해 **서버리스 패턴**을 사용하면 자동 확장, 비용 절감, 운영 부담 감소 등의 장점을 통해 마이크로 서비스 아키텍처를 더욱 효율적으로 구현할 수 있음.