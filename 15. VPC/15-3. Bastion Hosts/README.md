# Bastion Hosts

AWS에서 Bastion Host는 **VPC 내의 프라이빗 네트워크에 위치한 리소스에 대한 안전한 SSH (Secure Shell) 또는 RDP (Remote Desktop Protocol) 액세스를 제공하기 위해 사용되는 보안 게이트웨이 역할을 하는 인스턴스**임. 

이를 통해 외부에서 직접적으로 접근할 수 없는 프라이빗 서브넷 내 리소스에 대한 관리와 유지보수가 가능해짐.

**퍼블릭 서브넷에 배치되어 인터넷을 통해 접근 가능**하며, 이를 통해 프라이빗 서브넷 내의 리소스에 안전하게 접속할 수 있음.

Private Subnet에 존재하는 EC2 Instance는 Bastion Hosts에서만 접근할 수 있도록 EC2 Instance의 **보안그룹**에서 **Bastion Host의 보안그룹** 혹은 **Bastion Host의 private IP**의 접근을 허용해야함.

## 특징

### 보안 중계 서버

**외부에서 프라이빗 네트워크에 안전하게 접근**할 수 있도록 하는 중계 서버임.

### 퍼블릭 IP 주소

**퍼블릭 서브넷에 배치**되어 퍼블릭 IP 주소를 가짐.

### 제한된 접근

**Bastion Host에 대한 접근은 엄격하게 통제**되며, 관리자는 Bastion Host를 통해서만 프라이빗 서브넷의 리소스에 접근할 수 있음.

### SSH/RDP 접근

주로 SSH (Linux 인스턴스) 또는 RDP (Windows 인스턴스)를 통해 접근을 제공함.

## 구성요소

* **퍼블릭 서브넷**

    Bastion Host가 위치한 서브넷으로, **인터넷 게이트웨이를 통해 외부와 연결**됨.

* **프라이빗 서브넷**

    **프라이빗 리소스가 위치한 서브넷으로, 외부에서는 직접 접근할 수 없음**.

* **인터넷 게이트웨이**

    퍼블릭 서브넷과 인터넷 간의 연결을 제공함.

* **보안 그룹**

    Bastion Host 및 프라이빗 서브넷의 리소스에 대한 접근을 제어함.

    Bastion Hosts의 Security Group은 **Port 22**에서 접근하는 인터넷의 **Inbound**를 허용해야함.

* **라우팅 테이블**

    **퍼블릭 서브넷 및 프라이빗 서브넷 간의 트래픽을 제어하는 라우팅 규칙을 포함**함.

## 아키텍처

### Bastion Host 생성

**퍼블릭 서브넷**에 Bastion Host 인스턴스를 생성함.

### 보안 그룹 설정

Bastion Host와 프라이빗 리소스에 대해 엄격한 보안 그룹 규칙을 설정함.

### 접근 관리

**SSH 키 또는 사용자 인증을 통해 Bastion Host에 대한 접근을 제한**함.

### 프록시 역할

Bastion Host를 통해 **프라이빗 서브넷 내의 리소스에 접속하여 관리 작업**을 수행함.

## Architecture Example

![Bastion host architecture](https://github.com/user-attachments/assets/0c541d5c-b868-49ed-ba90-0d92e5f66bad)



## Use case

* **프라이빗 서브넷 리소스 관리**

    외부에서 프라이빗 서브넷 내의 데이터베이스, 애플리케이션 서버 등에 접근하여 관리 작업을 수행함.

* **보안 강화를 위한 접근 제어**

    Bastion Host를 통해 프라이빗 리소스에 대한 접근을 중앙에서 통제하고 모니터링함.

* **개발 및 테스트 환경**

    개발 및 테스트 환경에서 Bastion Host를 사용하여 프라이빗 서브넷의 리소스에 접근하고 작업을 수행함.

## Summary

AWS에서 Bastion Host는 **VPC 내의 프라이빗 네트워크에 위치한 리소스에 대해 안전한 SSH 또는 RDP 접근을 제공하는 보안 게이트웨이** 역할을 하는 인스턴스임. 

**퍼블릭 서브넷에 위치**하여 외부에서 접근 가능하며, 이를 통해 프라이빗 서브넷의 리소스에 안전하게 접속할 수 있음. 

보안 강화, 중앙 집중식 관리, 접근 제어 등의 장점을 제공하며, 프라이빗 서브넷 리소스 관리, 보안 강화를 위한 접근 제어, 개발 및 테스트 환경 등 다양한 사용 사례에 활용됨. 

**그러나 단일 실패 지점이 될 수 있고, 추가 비용과 관리 오버헤드가 발생**할 수 있음.






