# [VPC](https://docs.aws.amazon.com/ko_kr/vpc/latest/userguide/what-is-amazon-vpc.html)

## <img src = "https://github.com/user-attachments/assets/bfa6fe72-39a2-4c67-a3aa-d4b00395159a" width = "25" height = "25"> Virtual Private Cloud(VPC)

AWS VPC는 클라우드에서 **격리된 네트워크를 만들 수 있는 서비스로, 사용자는 VPC 내에서 네트워크 설정을 맞춤형으로 구성**할 수 있음. 

이를 통해 **데이터와 애플리케이션을 안전하게 격리**하고, **네트워크 트래픽을 관리**하며, 클라우드 리소스의 보안을 강화할 수 있음.

AWS Region 에 여러 개의 VPCs를 생성할 수 있음(Soft Limit: max 5 VPCs per region).

VPC 당 가질 수 있는 **최대 CIDR**는 5개임.

각 CIDR는 **Min**: /28, **Max**: /16 의 IP Address를 가질 수 있음.

VPC는 Private Network이기 때문에 **Private IPv4** 주소 범위만 가질 수 있음.

## 특징

### 네트워크 격리

**사용자 정의 IP 주소 범위, 서브넷, 라우팅 테이블을 통해 네트워크를 격리**할 수 있음.

### 인터넷 연결

**인터넷 게이트웨이, NAT 게이트웨이** 등을 통해 VPC 내부 리소스가 인터넷과 통신할 수 있도록 설정할 수 있음.

### 보안 그룹 및 네트워크 ACL

**인바운드 및 아웃바운드 트래픽을 제어하는 보안 그룹과 네트워크 ACL을 사용하여 보안 정책을 적용**할 수 있음.

### VPN 연결

**온프레미스 네트워크와의 안전한 통신을 위해 VPN 연결을 설정**할 수 있음.

### 고가용성

여러 가용 영역(AZ)에 서브넷을 배포하여 고가용성을 제공할 수 있음.

## 구성요소

* **VPC**

    가상 네트워크의 기본 단위로, 사용자가 정의한 IP 주소 범위를 가짐.

* **서브넷**

    **VPC 내의 IP 주소 범위를 더 작은 서브넷**으로 나눌 수 있음. 
    
    퍼블릭 서브넷과 프라이빗 서브넷으로 구성할 수 있음.

* **라우팅 테이블**

    네트워크 트래픽의 경로를 정의하며, 각 서브넷은 하나의 라우팅 테이블에 연결됨.

* **인터넷 게이트웨이**

    **VPC의 퍼블릭 서브넷이 인터넷과 통신할 수 있도록 하는 게이트웨이**임.

* **NAT 게이트웨이**

    **프라이빗 서브넷의 리소스가 인터넷과 통신할 수 있도록 하는 네트워크 주소 변환 게이트웨이**임.

* **보안 그룹**

    인스턴스 수준의 방화벽으로, 인바운드 및 아웃바운드 트래픽을 제어함.

* **네트워크 ACL**

    서브넷 수준의 방화벽으로, 인바운드 및 아웃바운드 트래픽을 제어함.

* **VPN 연결**

    **온프레미스 네트워크와 VPC 간의 안전한 통신을 위한 가상 사설망 연결**임.

## 아키텍처

### VPC 생성

사용자 정의 IP 주소 범위를 사용하여 VPC를 생성함.

### 서브넷 구성

VPC 내에 **퍼블릭 서브넷과 프라이빗 서브넷을 생성하여 리소스를 배포**함.

### 라우팅 테이블 설정

**각 서브넷에 라우팅 테이블을 연결**하여 네트워크 트래픽의 경로를 정의함.

### 인터넷 게이트웨이 연결

**퍼블릭 서브넷이 인터넷과 통신할 수 있도록 인터넷 게이트웨이를 VPC에 연결**함.

### NAT 게이트웨이 설정

**프라이빗 서브넷의 리소스가 인터넷과 통신할 수 있도록 NAT 게이트웨이를 설정**함.

### 보안 그룹 및 네트워크 ACL 구성

보안 그룹과 네트워크 ACL을 설정하여 인스턴스와 서브넷의 트래픽을 제어함.

### VPN 연결 설정

온프레미스 네트워크와 VPC 간의 안전한 통신을 위해 VPN 연결을 설정함.

## VPC Walkthrough

모든 새로운 AWS Accounts는 **기본 VPC**(Default VPC)를 가지고 있음.

새로 생성된 EC2 Instances는 **Subnet**이 특정되지 않으면 **기본 VPC**에서 시작함.

**기본 VPC**는 인터넷과 연결되어 있으며, 해당 VPC에 존재하는 모든 EC2 Instances는 **Public IPv4 주소**를 갖고 있음.


## Summary

AWS VPC는 사용자가 정의한 가상 네트워크 환경을 제공하는 서비스로, 네트워크 설정을 완전히 제어할 수 있음. 

이를 통해 IP 주소 범위, 서브넷, 라우팅 테이블, 보안 그룹, 네트워크 ACL 등을 구성하여 격리된 네트워크를 생성하고 관리할 수 있음. 

VPC는 네트워크 격리, 보안 강화, 고가용성 및 내결함성, 규정 준수 등의 장점을 제공하며, 웹 애플리케이션 호스팅, 온프레미스 통합, 데이터 분석, 개발 및 테스트 환경 등 다양한 사용 사례에 활용할 수 있음. 

설정 복잡성과 관리 부담이 있을 수 있으나, VPC를 통해 안전하고 확장 가능한 클라우드 네트워크 환경을 구축할 수 있음.