# [VPC Peering](https://docs.aws.amazon.com/ko_kr/vpc/latest/peering/what-is-vpc-peering.html)

## <img src = "https://github.com/user-attachments/assets/129bb105-441c-43ac-bd5c-40273e38cd2e" width = "25" height = "25"> VPC Peering

AWS의 VPC Peering은 **두 개의 VPC(Virtual Private Cloud)를 서로 연결**하여 **네트워크 트래픽을 교환**(양방향)할 수 있도록 하는 네트워크 연결 서비스임. 

VPC Peering을 통해 **서로 다른 VPC 간에 프라이빗 IP 주소를 사용하여 통신**할 수 있으며, **동일한 AWS 리전 내에 있거나 다른 리전 간에도 설정**할 수 있음. 

따라서 VPC Peering을 사용하면 연결된 VPC가 서로 **같은 네트워크에 속한 것**처럼 작동할 수 있음.

이는 **퍼블릭 인터넷을 경유하지 않고 프라이빗 네트워크 내부에서 안전하게 트래픽을 전달할 수 있는 방법**임.

이를 통해 **복수의 VPC 간에 안전하고 효율적인 네트워크 통신을 가능**하게 함.

**VPC Peering**을 위해서는 각 VPC가 겹치는 CIDR Block이 있어서는 안됨.

## 특징

### 프라이빗 네트워크 연결

**퍼블릭 인터넷을 경유하지 않고 VPC 간에 직접 연결하여 프라이빗 IP 주소를 사용해 통신**함.

### 고가용성

AWS 네트워크 인프라를 통해 높은 가용성과 안정성을 제공함.

### 보안

**트래픽이 AWS 네트워크 내에서만 이동**하므로, 퍼블릭 인터넷을 통한 공격 벡터가 없음.

### 유연성

동일한 리전 내 또는 **다른 리전** 간에도 VPC Peering을 설정할 수 있음.

다른 AWS Account 사이에도 VPC Peering을 설정할 수 있음.

### 비용 효율성

**데이터 전송 비용이 비교적 낮으며**, 트래픽에 대해 추가적인 인프라를 구축할 필요가 없음.

## 구성요소

* **VPC Peering 연결**

    두 VPC 간의 피어링 요청과 수락을 통해 설정되는 네트워크 연결.

* **라우팅 테이블**

    VPC Peering 연결을 통해 트래픽을 전달하기 위해 **각 VPC의 라우팅 테이블에 경로를 추가**함.

* **보안 그룹**

    연결된 VPC 간의 트래픽을 허용하기 위해 보안 그룹 규칙을 설정함.

* **네트워크 ACL**

    서브넷 수준에서 트래픽을 제어하기 위한 네트워크 ACL 설정.

## 아키텍처

### VPC Peering 요청

한 VPC의 소유자가 다른 VPC의 소유자에게 피어링 연결 요청을 보냄.

### VPC Peering 수락

요청을 받은 VPC의 소유자가 피어링 요청을 수락함.

### 라우팅 테이블 구성

**각 VPC의 라우팅 테이블에 상대 VPC의 IP 주소 범위에 대한 경로를 추가**함.

### 보안 그룹 및 네트워크 ACL 설정

필요한 트래픽을 허용하도록 보안 그룹 및 네트워크 ACL을 설정함.

## Use case

* **다중 계층 애플리케이션**

    여러 VPC에 걸쳐 배포된 다중 계층 애플리케이션 간의 통신을 위해 사용함.

* **리소스 공유**

    여러 VPC 간에 데이터베이스, 파일 스토리지 등의 리소스를 공유하기 위해 사용함.

* **멀티 리전 아키텍처**

    서로 다른 리전 간에 VPC를 연결하여 글로벌 애플리케이션을 구축하기 위해 사용함.

## Sumamry

AWS의 VPC Peering은 **두 개의 VPC를 서로 연결하여 프라이빗 IP 주소를 사용해 안전하게 통신할 수 있게 하는 네트워크 연결 서비스**임. 

프라이빗 네트워크 통신, 높은 가용성 및 안정성, 비용 효율성, 보안 강화 등의 장점을 제공함. 

VPC Peering은 스포크 및 허브 패턴의 복잡성, 라우팅 제한, 대역폭 제한 등의 단점이 있으며, 다중 계층 애플리케이션, 리소스 공유, 멀티 리전 아키텍처 등의 사용 사례에 적합함.