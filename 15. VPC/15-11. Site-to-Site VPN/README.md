# [Site-to-Site VPN](https://docs.aws.amazon.com/ko_kr/vpn/latest/s2svpn/VPC_VPN.html)

## <img src = "https://github.com/user-attachments/assets/43929464-4b4d-4c0e-94b5-c1d4a4b7ad4c" width = "25" height = "25"> Site to Site VPN

AWS Site-to-Site VPN은 **온프레미스 네트워크와 AWS 클라우드 간의 안전한 통신(암호화된 터널)을 위해 가상 사설 네트워크(VPN) 연결을 제공하는 서비스**임. 

이를 통해 사용자는 **온프레미스 데이터 센터, 지사, 또는 다른 클라우드 환경과 AWS VPC 간에 안전하게 데이터를 전송**할 수 있음.

VPN 연결은 **고객 게이트웨이와 AWS 게이트웨이 간에 설정되며, IPsec 프로토콜을 사용하여 데이터 전송을 보호**함.

## 특징

### 보안

**IPsec VPN**을 사용하여 데이터 전송을 암호화하고 보호함.

### 고가용성

이중화된 터널을 통해 높은 가용성을 제공함.

### 유연성

**다양한 온프레미스 네트워크 장비와 호환 가능**함.

### 확장성

AWS 클라우드 리소스와 온프레미스 네트워크 간의 안전한 연결을 쉽게 확장할 수 있음.

### 모니터링 및 관리

**Amazon CloudWatch와 통합**되어 VPN 연결 상태를 모니터링하고 로그를 분석할 수 있음.

## 구성요소

* **가상 프라이빗 게이트웨이** (VGW)

    AWS 측에서 VPN 터널을 종료하는 지점.

    VGW는 생성 후 Site-to-Site VPN 연결을 실행할 VPC에 붙음.

    ASN(Autonomous System Number)를 Customize할 수 있음.

* **고객 게이트웨이** (CGW)

    온프레미스 네트워크 측에서 VPN 터널을 종료하는 지점.

    **Public Internet-routable IP 주소**를 사용해야 함.

* **VPN 연결**

    VGW와 CGW 간에 설정된 IPsec VPN 터널.

* **라우팅 테이블**

    **VPC의 라우팅 테이블에 VPN 연결을 통해 트래픽을 라우팅**하도록 구성함.

## 아키텍처

### 고객 게이트웨이 (CGW)

온프레미스 라우터 또는 VPN 어플라이언스를 정의함.

### 가상 프라이빗 게이트웨이 (VGW)

**AWS VPC에 연결된 VPN 게이트웨이를 생성**함.

CGW와 연결할 Subnet의 라우트 테이블에서 **Route Propagation**을 활성화해야함.

### VPN 연결 생성

CGW와 VGW 간에 VPN 연결을 생성하고 설정함.

### 터널 구성

**두 개의 이중화된 VPN 터널을 구성하여 고가용성을 보장**함.

### 라우팅 설정

온프레미스와 VPC 간의 트래픽이 VPN 터널을 통해 전달되도록 라우팅 테이블을 설정함.

## Use case

* **하이브리드 클라우드**

    온프레미스 데이터 센터와 AWS 클라우드 간의 안전한 데이터 전송을 위해 사용함.

* **데이터 마이그레이션**

    온프레미스에서 AWS로 데이터 마이그레이션 시 안전한 통신 경로를 제공함.

* **백업 및 복구**

    온프레미스 백업 데이터를 AWS 클라우드에 안전하게 저장하고 복구하기 위해 사용함.

* **원격 오피스 연결**

    지사나 원격 오피스를 AWS 클라우드에 연결하여 중앙에서 관리할 수 있도록 함.

## Summary

AWS Site-to-Site VPN은 **온프레미스 네트워크와 AWS 클라우드 간의 안전한 통신을 위해 IPsec 기반의 암호화된 터널**을 제공하는 서비스임. 

가상 프라이빗 게이트웨이와 고객 게이트웨이 간에 VPN 터널을 설정하여 보안성, 고가용성, 유연성을 제공함. 

주요 사용 사례로는 하이브리드 클라우드, 데이터 마이그레이션, 백업 및 복구, 원격 오피스 연결 등이 있음. 

인터넷 의존성 및 성능 제한 등의 단점이 있지만, 보안 강화 및 비용 효율성 등의 장점이 있음.