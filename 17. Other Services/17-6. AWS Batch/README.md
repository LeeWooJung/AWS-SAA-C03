# [Amazon Batch](https://docs.aws.amazon.com/ko_kr/batch/latest/userguide/what-is-batch.html)


## <img src = "https://github.com/user-attachments/assets/e0db246f-0fda-499d-944f-cb81661e3ed2" width = "25" height = "25"> Batch

Amazon Batch는 AWS에서 제공하는 **완전 관리형 서비스**로 배치 작업을 계획하고 실행하는 데 필요한 **인프라를 자동으로 프로비저닝하고 관리하는 서비스**임. 사용자는 인프라를 관리하지 않아도 됨. 이 덕분에 비용 최적화에 도움이 됨.

이 서비스는 **컴퓨팅 리소스를 효율적으로 관리하고 확장할 수 있도록 도와주며, 대규모 배치 작업을 손쉽게 실행**할 수 있게 해줌. 

이를 통해 사용자들은 **인프라를 직접 관리하지 않고도 데이터 분석, 모델 훈련, 이미지 처리 등의 다양한 배치 작업을 자동으로 처리**할 수 있음.

이 서비스는 **다양한 크기의 작업을 처리**할 수 있는 컴퓨팅 환경을 제공하며, 사용자가 정의한 **작업 큐와 컴퓨팅 환경에 따라 배치 작업을 효율적으로 스케줄링하고 실행**함. 


100,000 개의 Computing Batch Jobs를 효율적으로 실행할 수 있음.

## 특징

### 자동 리소스 프로비저닝

작업 요구사항에 따라 컴퓨팅 리소스를 자동으로 프로비저닝하고 관리함.

### 유연한 스케줄링

**우선순위와 종속성을 고려하여 작업을 효율적으로 스케줄링**함.

### 다양한 인스턴스 지원

Amazon **EC2와 EC2 스팟 인스턴스를 포함한 다양한 인스턴스 타입을 지원**함.

### 작업 큐 관리

**작업 큐를 생성하고, 작업의 우선순위를 지정하여 효율적으로 관리**할 수 있음.

### 모니터링 및 로깅

Amazon CloudWatch와 통합되어 작업의 상태를 모니터링하고 로그를 수집할 수 있음.

### 컨테이너 지원

**Docker 컨테이너를 지원**하고 이를 **ECS**에서 실행하여 배포와 실행 환경을 일관되게 유지할 수 있음.

## 구성요소

* **컴퓨팅 환경**(Compute Environment)

    배치 작업을 실행할 인프라를 정의함. 
    
    **관리형 및 비관리형 환경**을 선택할 수 있음.

* **작업 정의**(Job Definition)

    배치 작업의 구성을 정의하는 템플릿으로, 작업의 도커 이미지, vCPU 및 메모리 요구사항 등을 포함함.

* **작업 큐**(Job Queue)

    **작업을 대기열에 넣어 우선순위에 따라 스케줄링하고 실행**함.

* **작업**(Job)

    실제로 실행되는 배치 작업으로, 작업 정의에 따라 실행됨.

## 아키텍처

### 사용자 인터페이스

사용자가 AWS Management Console, AWS CLI 또는 SDK를 통해 배치 작업을 제출함.

### 작업 큐

**제출된 작업이 대기열에 추가되고, 우선순위와 정책에 따라 처리**됨.

### 스케줄러

작업 큐에 있는 작업을 적절한 컴퓨팅 환경에 할당하고 스케줄링함.

### 컴퓨팅 환경

**작업을 실행하기 위해 필요한 컴퓨팅 리소스를 프로비저닝하고 관리**함.

### 모니터링 및 로깅

작업의 상태를 모니터링하고 로그를 수집하여 분석함.

## Use case

* **데이터 분석**

    대규모 데이터 세트를 분석하고 처리하는 작업.

* **머신 러닝**

    모델 훈련과 예측 작업을 배치로 실행.

* **이미지 처리**

    대규모 이미지 변환 및 처리 작업.

* **비디오 트랜스코딩**

    비디오 파일의 형식 변환 작업.

* **시뮬레이션**

    과학적 연구 및 금융 모델링을 위한 시뮬레이션 작업.

## vs. Lambda

|특징|Lambda|Batch|
|:---|:---:|:---:|
|Time|Time Limit|No Time Limit|
|Runtime|Limited Runtimes|Docker Image로 실행되는 한 어떤 Runtime도 가능|
|Disk Space|Limited Temporary Disk Space|Rely on EBS / Instance Store|
|Server|Serverless|EC2에 의존, Not Serverless|

## Summary

Amazon Batch는 **AWS 리소스와 온프레미스 서버를 통합적으로 관리할 수 있는 서비스**임. 

**구성 관리, 패치 관리, 운영 데이터 수집 및 분석, 원격 명령 실행 등의 기능을 제공하여 운영 효율성을 높이고 보안과 규정 준수를 강화**함. 

다양한 AWS 서비스와 통합하여 인프라 관리의 복잡성을 줄이고 운영 비용을 절감할 수 있음.