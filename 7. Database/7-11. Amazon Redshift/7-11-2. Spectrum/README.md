# Spectrum

Amazon Redshift Spectrum은 **Amazon Redshift 클러스터를 확장하여 Amazon S3에 저장된 엑사바이트(Exabyte) 규모의 데이터에 대해 Loading 없이 쿼리할 수 있게 해주는 기능**임. 

Redshift Spectrum을 사용하면 **Redshift 데이터 웨어하우스의 데이터와 S3의 데이터를 결합하여 분석**할 수 있음.

## 특징

### 확장성

Redshift 클러스터의 컴퓨팅 리소스와 **독립적으로 확장 가능**함.  

S3에 있는 대량의 데이터를 쿼리할 때 Redshift 클러스터의 용량을 초과하지 않음.

### 유연성

S3에 저장된 데이터는 다양한 형식(CSV, TSV, Parquet, ORC 등)을 지원하며, 이를 **Redshift 테이블처럼 쿼리할 수 있음**.

### 비용 효율성

**필요한 만큼만 비용을 지불**함. 

Redshift 클러스터의 스토리지와 컴퓨팅 리소스를 확장하지 않고도 대량의 데이터를 분석할 수 있음.

### 고성능

**Redshift 클러스터와 S3 데이터를 결합**하여 빠르고 효율적인 쿼리 성능을 제공함.

## 구성요소

### Redshift 클러스터

기본적으로 데이터 웨어하우스 기능을 수행하며, S3 데이터를 쿼리할 수 있는 Spectrum 기능을 제공함.

### Amazon S3

엑사바이트 규모의 데이터를 저장할 수 있는 스토리지 서비스로, **Redshift Spectrum을 통해 데이터를 쿼리**할 수 있음.

### Spectrum 작업자

S3 데이터를 쿼리하기 위해 자동으로 프로비저닝되는 **분산 컴퓨팅 리소스**임.

## 아키텍처

### Redshift 테이블 정의

**Redshift 내부**에 S3 데이터를 참조하는 **외부 테이블을 정의**함. 

이 테이블은 **S3의 데이터에 대한 메타데이터**를 포함함.

### 쿼리 실행

사용자가 S3 데이터를 쿼리하면, Redshift는 Spectrum 작업자를 통해 S3 데이터를 읽고 결과를 반환함.

### 데이터 통합

Redshift 테이블과 S3 외부 테이블을 결합하여 쿼리할 수 있음.

## Architecture Example

![spectrum architecture](https://github.com/user-attachments/assets/c0017210-1176-4692-a8d1-4dd794bfaa72)


## 장점

* **확장성**

    **S3의 무제한 확장성과 결합**되어 대규모 데이터 세트를 처리할 수 있음.

* **비용 절감**

    **필요한 만큼의 컴퓨팅 리소스를 사용하므로 비용 효율적**임.

* **유연한 데이터 형식 지원**

    다양한 데이터 형식을 지원하여 유연하게 데이터 분석 가능.

* **데이터 통합**

    Redshift 내부 데이터와 S3 데이터를 통합하여 분석할 수 있음.

## 단점

* **성능**

    S3에서 직접 데이터를 쿼리할 때 **로컬 Redshift 테이블에 비해 성능이 떨어질 수 있음**.

* **복잡성**

    **외부 테이블의 메타데이터 관리 및 쿼리 최적화가 추가적인 작업**을 필요로 할 수 있음.

## Use case

* **데이터 레이크 쿼리**

    S3에 저장된 대규모 데이터 레이크에 대해 분석 쿼리를 실행할 때 사용함.

* **데이터 웨어하우스 확장**

    **기존 Redshift 데이터 웨어하우스의 용량을 초과하지 않고 추가 데이터를 분석**할 때 유용함.

* **혼합 워크로드**

    Redshift 클러스터와 S3 데이터 레이크를 결합하여 분석 작업을 수행할 때 사용함.


## Summary

Amazon Redshift Spectrum은 **Redshift 클러스터를 확장하여 S3에 저장된 데이터를 쿼리할 수 있게 해주는 강력한 기능**임. 

이는 대규모 데이터 세트를 유연하고 비용 효율적으로 처리할 수 있도록 도와줌. 

Redshift Spectrum을 통해 S3 데이터와 Redshift 데이터 웨어하우스의 데이터를 결합하여 복잡한 분석 작업을 수행할 수 있음.