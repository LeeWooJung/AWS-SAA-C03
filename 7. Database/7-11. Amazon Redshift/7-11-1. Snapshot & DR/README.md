# Snapshot & DR

## Snapshot

Amazon Redshift에서 스냅샷은 **클러스터의 현재 상태를 캡처한 백업**임.  

스냅샷은 **클러스터의 모든 데이터를 포함하며, 필요 시 특정 시점으로 데이터를 복구**(point-in-time backup)할 수 있도록 해줌.

Redshift는 몇몇 Cluster에 **Multi-AZ** 모드를 적용할 수 있음.

스냅샷을 새로운 Cluster로 복구할 수 있음.

Redshift에서 자동으로 스냅샷이 다른 AWS Region에 존재하는 Cluster에 복사되도록 **구성**할 수 있음.

### 특징

* **자동 스냅샷**

    Amazon Redshift는 **자동으로 정기적인 스냅샷을 생성**함.  
    
    기본적으로 하루에 한 번 생성되며, **스냅샷 보유 기간을 설정**(1~35일)할 수 있음.

    매일 8시간 마다, 매 5GB 마다 혹은 스케쥴마다 스냅샷을 생성함.

* **수동 스냅샷**

    사용자가 필요에 따라 수동으로 스냅샷을 생성할 수 있음.  
    
    수동 스냅샷은 **사용자가 삭제할 때까지 유지**됨.

* **복구 시간**

    스냅샷을 사용한 복구는 일반적으로 빠르며, **백업 데이터는 Amazon S3에 저장**되어 있음.

* **암호화**

    스냅샷은 **클러스터의 데이터 암호화 설정**을 따름.  
    
    암호화된 클러스터의 스냅샷은 자동으로 암호화됨.

* **Incremental**

    스냅샷은 Redshift의 변경된 부분에 대해서만 저장함.

## DR(Disaster Recovery)

Disaster Recovery(DR)는 시스템 장애나 데이터 손실 상황에서 **데이터를 복구하고 시스템을 정상 상태로 되돌리는 프로세스를 의미**함.  

Amazon Redshift는 DR을 위해 다양한 기능을 제공함.

### 주요 DR 기능

* **스냅샷 복구**

    스냅샷을 사용하여 **특정 시점의 클러스터 상태로 복구**할 수 있음. 
    
    클러스터가 손상되거나 데이터를 잃은 경우, **마지막 스냅샷을 사용해 빠르게 복구 가능**함.

* **리전 간 복제**

    스냅샷을 **다른 AWS 리전으로 복제**할 수 있음.  
    
    이는 **리전 단위의 장애 발생 시 데이터를 안전하게 보호하는 데 유용**함.  
    
    리전 간 복제를 통해 다양한 지리적 위치에 데이터를 보관할 수 있음.

* **백업 및 복구**

    **자동 및 수동 스냅샷을 활용한 정기 백업은 데이터 보호의 중요한 요소**임. 
    
    장애 발생 시 최신 스냅샷을 사용하여 데이터를 복구할 수 있음.

* **비용 관리**

    **스냅샷은 S3에 저장**되므로, S3의 저렴한 스토리지 비용으로 백업을 관리할 수 있음.  
    
    필요한 스냅샷만 유지하여 비용을 절감할 수 있음.

## Snapshot 및 DR의 장단점:

### 장점

* **신속한 복구**

    스냅샷을 사용한 복구는 신속하고 효율적임.

* **데이터 보호**

    정기적인 스냅샷과 리전 간 복제를 통해 데이터를 안전하게 보호할 수 있음.

* **유연성**

    수동 스냅샷을 사용하여 특정 시점의 데이터를 보존하고 필요 시 복구할 수 있음.

### 단점

* **비용**

    스냅샷 저장 비용이 발생할 수 있으며, 특히 **리전 간 복제를 사용하는 경우 추가 비용이 발생**함.

* **관리**

    수동 스냅샷의 경우, **주기적으로 백업을 관리하고 불필요한 스냅샷을 삭제**해야 함.

## Use case

* **데이터 백업**

    중요한 데이터의 정기적인 백업을 위해 스냅샷을 활용함.

* **데이터 복구**

    장애나 데이터 손실 발생 시, 스냅샷을 사용해 빠르게 데이터를 복구함.

* **리전 간 복제**

    재해 복구 전략의 일환으로, 데이터를 여러 리전에 분산 저장하여 지리적 장애에 대비함.

## Summary

Amazon Redshift의 Snapshot과 Disaster Recovery 기능은 데이터 보호와 신속한 복구를 위한 강력한 도구임.

스냅샷을 통해 정기적인 데이터 백업과 특정 시점 복구가 가능하며, 리전 간 복제를 통해 지리적 장애에 대비할 수 있음. 

이러한 기능을 통해 **데이터의 가용성과 안전성**을 높일 수 있음.