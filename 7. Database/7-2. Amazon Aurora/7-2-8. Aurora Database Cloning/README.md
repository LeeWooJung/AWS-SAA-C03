# [Aurora Database Cloning](https://docs.aws.amazon.com/ko_kr/AmazonRDS/latest/AuroraUserGuide/Aurora.Managing.Clone.html)

## Aurora Database Cloning

### 설명

* **Amazon Aurora Database Cloning**은 Aurora 클러스터의 데이터를 빠르고 효율적으로 복사할 수 있는 기능.  
* 이는 새로운 데이터베이스 인스턴스를 생성하고, 데이터베이스의 크기와 상관없이 **짧은 시간 내에 복제를 완료**(faster than snapshot & restore)할 수 있게 해줌.  
* Aurora Database Cloning을 통해 사용자는 테스트, 개발, 분석 등의 목적으로 데이터를 쉽게 복제할 수 있음.
* Amazon Aurora Database Cloning은 **카피 온 라이트**(copy-on-write) 메커니즘을 사용하여 전체 데이터셋을 복제하지 않고 데이터베이스 클론을 생성함.

### 특징

1. **신속한 복제**  
    * Aurora Database Cloning은 전체 데이터베이스를 복제하는데 몇 분 내지 몇 시간이 걸리는 전통적인 복제 방법과 달리, **데이터베이스의 크기와 상관없이 빠르게 복제가 완료**됨.
    * 스토리지 계층에서 데이터 블록을 복사하지 않고 **메타데이터만 복사**함으로써 이 속도를 달성함.

2. **효율적인 스토리지 사용**  
    * 원본 데이터와 복제된 데이터베이스는 **동일한 스토리지 계층을 공유**.  
    * 이를 통해 데이터의 실제 복사본을 만들지 않고도 클론을 생성할 수 있음.
    * 변경된 데이터만 별도로 저장되므로 스토리지 비용이 절감됨.

3. **독립적인 클러스터**  
    * 복제된 데이터베이스는 독립된 클러스터로서 운영되며, 원본 데이터베이스와 별개로 관리할 수 있음.
    * 클론은 원본 데이터베이스와 동일한 성능을 유지하며, 클론에서의 변경 사항은 원본 데이터베이스에 영향을 미치지 않음.

### 절차

1. **클론 생성**  
    * AWS Management Console, AWS CLI 또는 RDS API를 통해 Aurora 클러스터의 클론을 생성할 수 있음.
    * 클론 생성 시 원본 데이터베이스의 **메타데이터**를 기반으로 새로운 클러스터가 생성됨.

2. **클론의 사용**  
    * 클론된 데이터베이스는 독립적인 클러스터로서 작동하며, 원본 데이터베이스와 동일한 설정과 데이터를 포함.
    * 사용자는 클론을 기존 데이터베이스와 동일한 방식으로 사용하고 관리할 수 있음.

3. **변경 사항 관리**  
    * 클론된 데이터베이스에서 발생하는 모든 변경 사항은 **원본 데이터베이스와 독립적으로 관리**됨.
    * 원본 데이터베이스와 클론 간의 데이터 **동기화는 자동으로 처리되지 않으며**, 필요한 경우 별도의 데이터 동기화 작업이 필요함.

### 고가용성 및 확장성

* **고가용성**  
    * Aurora의 **복제 메커니즘과 분산 스토리지 아키텍처 덕분에 클론된 데이터베이스도 고가용성을 유지**함.
* **확장성**  
    * 클론된 데이터베이스는 독립적으로 확장할 수 있으며, 필요에 따라 읽기 전용 인스턴스를 추가하여 읽기 작업의 부하를 분산시킬 수 있음.

### Use Case

* **개발 및 테스트**  
    * 개발 환경에서 실제 운영 데이터베이스와 동일한 환경을 신속하게 복제하여 테스트할 수 있음.
    * 새로운 애플리케이션 기능을 테스트하거나 버그를 수정할 때, 운영 데이터베이스의 복제본을 사용하여 실제 데이터를 기반으로 테스트할 수 있음.

* **데이터 분석**  
    * 분석 작업을 위해 데이터베이스의 클론을 생성하여 분석팀이 운영 데이터베이스에 영향을 주지 않고 작업을 수행할 수 있음.
    * 클론을 사용하여 데이터 분석을 하면서도 운영 환경의 성능 저하를 방지할 수 있음.

* **백업 및 복원 시뮬레이션**  
    * 데이터베이스 백업 및 복원 절차를 시뮬레이션하여 데이터 손실 위험을 줄일 수 있음.
    * 클론을 사용하여 복원 작업을 검증하고 절차를 테스트할 수 있음.

## Summary

* **Amazon Aurora Database Cloning**은 빠르고 효율적인 데이터베이스 복제 기능을 제공하여 개발, 테스트, 분석 등의 작업을 용이하게 함.  
* 스토리지 계층에서 데이터 블록을 복사하지 않고 **메타데이터만 복사**함으로써 신속한 복제를 가능하게 하며, 원본 데이터베이스와 클론 간의 **독립적인 운영**을 보장.  
* 이를 통해 사용자는 운영 환경에 영향을 주지 않고도 다양한 용도로 데이터를 복제하고 사용할 수 있음.