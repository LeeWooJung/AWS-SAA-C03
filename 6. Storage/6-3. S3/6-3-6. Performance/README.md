# [S3 Performance](https://docs.aws.amazon.com/ko_kr/AmazonS3/latest/userguide/optimizing-performance-guidelines.html)

## S3 Performance

### Baseline Performance
* Amazon S3의 기본 성능은 **높은 확장성, 데이터 가용성, 내구성**을 제공하도록 설계되어 있음.  
* S3는 대규모 데이터 집합에 대한 액세스를 제공하며, 여러 가지 최적화 기술을 통해 안정적이고 예측 가능한 성능을 보장.

1. **내구성**  
S3는 객체 데이터를 여러 가용 영역(AZ)에 자동으로 복제하여 **99.999999999%** (11 9's)의 내구성을 제공.
2. **가용성**  
S3는 **99.99%**의 가용성을 제공하며, Standard-IA 및 One Zone-IA와 같은 스토리지 클래스는 약간 낮은 가용성을 제공.
3. **확장성**  
S3는 저장 공간과 성능 면에서 **무한히 확장** 가능하며, 필요에 따라 자동으로 확장.

### Performance
S3의 성능은 여러 요소에 의해 영향을 받을 수 있으며, 이를 최적화하기 위해 다양한 접근 방식을 사용할 수 있음.

1. **요청 속도 및 처리량**  
  * S3는 매우 높은 수준의 요청 속도와 처리량을 지원.  
  * 단일 접두사(prefix) 내에서 초당 수천 건의 요청을 처리할 수 있음.  
  * 접두사를 사용하여 객체를 분산하면 요청 속도를 높일 수 있음.
  * 접두사의 개수는 한계 없이 늘릴 수 있음.

2. **데이터 전송 속도**  
  * S3는 높은 데이터 전송 속도를 제공하며, 전송 속도는 네트워크 대역폭, 객체 크기, 요청 패턴 등에 의해 영향을 받을 수 있음.

3. **멀티파트 업로드**(Multi-Part Upload)  
  * **대용량 객체**(100MB 이상)를 업로드할 때는 멀티파트 업로드를 사용하여 성능을 향상시킬 수 있음.  
  * 멀티파트 업로드는 객체를 여러 부분으로 나누어 **병렬로 업로드**하므로, 업로드 속도를 높일 수 있음.

### Byte-Range Fetches
  * Byte-range fetches는 S3에서 객체의 특정 **바이트 범위를 요청**할 수 있는 기능. 이를 통해 큰 객체의 **일부분**만을 읽을 수 있으며, 다양한 활용 사례에서 성능을 최적화할 수 있음.
  * Failure에 대해 높은 회복력을 보임.

1. **효율적인 데이터 접근**  
필요한 데이터 부분만 읽음으로써 네트워크 트래픽을 줄이고 응답 시간을 단축할 수 있음.

2. **병렬 처리**  
큰 파일을 여러 부분으로 나누어 병렬로 읽음으로써 읽기 성능을 크게 향상시킬 수 있음.

3. **애플리케이션 최적화**  
미디어 스트리밍, 데이터 분석, 로그 파일 처리 등 특정 부분만 필요로 하는 애플리케이션에서 유용하게 사용할 수 있음.


## 최적화 팁

* **접두사 분산**  
  * 접두사를 사용하여 객체를 분산함으로써 S3의 요청 처리 성능을 향상시킬 수 있음.  
  * 이는 요청을 여러 **파티션으로 분산**시켜 병목 현상을 줄이는 데 도움이 됨.  
  * 예시(객체 Path -> Prefix)  
    > **PATH**: my-bucket/my_folder1/sub_folder1/file, **Prefix**: /my_folder1/sub_folder/  
    > **PATH**: my-bucket/my_folder1/sub_folder2/file, **Prefix**: /my_folder1/sub_folder2/  
    > **PATH**: my-bucket/first/file, **Prefix**: /first/  
    > **PATH**: my-bucket/second/file, **Prefix**: /second

* **멀티파트 업로드 사용**  
  * 큰 객체를 업로드할 때는 **멀티파트 업로드**를 사용하여 네트워크 성능을 최적화할 수 있음.

* **병렬 다운로드**  
  * Byte-range fetches를 활용하여 큰 객체를 병렬로 다운로드함으로써 읽기 속도를 높일 수 있음.
  * **S3 Transfer Acceleration**  
    * **글로벌 사용자**를 대상으로 하는 경우 S3 Transfer Acceleration을 사용하여 데이터 전송 속도를 높일 수 있음.
    * AWS edge location을 통해 S3 Bucket으로 빠르게 파일 전송 가능.
    * Multi-Part Upload와 호환 가능.