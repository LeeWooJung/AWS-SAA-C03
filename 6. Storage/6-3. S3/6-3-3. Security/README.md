# [S3 Security](https://aws.amazon.com/ko/s3/security/)

## S3 Security

* Amazon S3 (Simple Storage Service)는 **보안 기능**을 통해 데이터를 안전하게 저장하고 보호.  
* S3의 보안은 **데이터 액세스 제어, 데이터 암호화, 모니터링 및 로깅을 포함한 여러 계층으로 구성**되어 있음.  
* 각 기능은 데이터 보안을 강화하고, 규정 준수 및 감사 요구 사항을 충족하는 데 도움이 됨.

### 데이터 액세스 제어

* **IAM 정책** (Identity and Access Management Policies)  
    * **역할 및 사용자**  
    IAM을 사용하여 사용자, 그룹, 역할에 대한 권한을 관리. 이를 통해 S3 버킷 및 객체에 대한 접근을 세밀하게 제어할 수 있음.
    * **정책 문서**  
    **JSON 형식의 정책 문서**를 통해 특정 사용자나 그룹에 대한 허용 또는 거부 권한을 명시.

* **S3 버킷 정책** (Bucket Policies)  
    * **버킷 수준의 접근 제어**  
    버킷 정책을 통해 특정 버킷에 대한 액세스 권한을 정의할 수 있음. 이는 버킷 소유자가 접근 권한을 제어하는 데 유용.
    * **조건부 접근 제어**  
    요청의 특정 조건(예: IP 주소, 요청 시간 등)에 따라 액세스를 허용하거나 거부할 수 있음.
    * 예시
        ```json
        {
            "Version": "2012-10-17",
            "Statement": [
                {
                    "Effect": "Allow",
                    "Principal": "*",
                    "Action": "s3:GetObject",
                    "Resource": "arn:aws:s3:::example-bucket/*"
                }
            ]
        }
        ```
        * **Version**  
        정책 언어의 버전. 현재 AWS에서는 "2012-10-17" 버전을 사용.
        * **Statement**  
        정책의 주요 구성 요소로, 하나 이상의 권한 부여 내용을 포함.
        * **Effect**  
        정책의 효과를 지정. Allow는 허용을 의미하고, Deny는 거부를 의미.
        * **Principal**  
        접근 권한을 부여받는 주체를 지정. *은 모든 사용자(퍼블릭)를 의미.
        * **Action**  
        허용되거나 거부된 S3 작업을 지정. s3:GetObject는 객체 읽기를 의미.
        * **Resource**  
        정책이 적용되는 S3 리소스를 지정. arn:aws:s3:::example-bucket/*는 example-bucket 내의 모든 객체를 의미.

* **액세스 제어 목록** (ACL, Access Control Lists)
    * **객체 및 버킷 수준의 권한**  
    ACL을 통해 각 객체 및 버킷에 대한 읽기 및 쓰기 권한을 개별적으로 설정할 수 있음.
    * **기본 ACL 사용**  
    기본적으로 객체를 업로드할 때 기본 ACL을 설정할 수 있으며, 이를 통해 접근 권한을 간편하게 관리할 수 있음.

### 데이터 암호화
* **서버 측 암호화** (Server-Side Encryption, SSE)
    * **SSE-S3** (S3 Managed Keys)  
    S3에서 관리하는 암호화 키를 사용하여 데이터를 암호화.
    * **SSE-KMS** (AWS Key Management Service)  
    KMS를 사용하여 키를 관리하고 제어할 수 있으며, 키의 사용을 감사할 수 있음.
    * **SSE-C** (Customer-Provided Keys)  
    사용자가 제공한 암호화 키를 사용하여 데이터를 암호화. 키는 S3에 저장되지 않음.

* **클라이언트 측 암호화** (Client-Side Encryption)
    * **데이터 전송 전 암호화**  
    사용자가 데이터를 S3에 업로드하기 전에 데이터를 암호화. 이 방법은 데이터가 S3로 전송되는 동안에도 보호.
    * **고유한 키 관리**  
    사용자가 직접 암호화 키를 관리하고 보관함.

### 네트워크 보안
* **전송 중 데이터 암호화**
    * **SSL/TLS**  
    데이터를 업로드하거나 다운로드할 때 SSL/TLS를 사용하여 데이터를 암호화. 이를 통해 **전송 중인 데이터의 무결성과 기밀성을 보호**합니다.
* **VPC 엔드포인트** (VPC Endpoints)
    * **PrivateLink**  
    VPC 엔드포인트를 사용하여 Amazon S3와의 통신을 AWS 네트워크 내부로 제한할 수 있음. 이를 통해 인터넷을 통해 데이터를 전송할 필요 없이 안전하게 S3에 접근할 수 있음.

### 모니터링 및 로깅
* **AWS CloudTrail**
    * **API 호출 추적**  
    CloudTrail을 사용하여 S3에 대한 모든 API 호출을 로깅. 이를 통해 누가, 언제, 어떤 작업을 수행했는지에 대한 기록을 남길 수 있음.
    * **보안 분석 및 감사**  
    CloudTrail 로그를 분석하여 보안 침해 시도를 식별하고, 규정 준수 요구 사항을 충족할 수 있음.
* **S3 서버 액세스 로그**
    * **버킷 액세스 기록**  
    S3 서버 액세스 로그를 활성화하여 버킷 및 객체에 대한 요청을 로깅. 이를 통해 액세스 패턴을 분석하고, 비정상적인 활동을 감지할 수 있음.

### 추가 보안 기능
* **S3 Object Lock**
    * **WORM**(Write Once, Read Many) 보호  
    객체를 수정하거나 삭제하지 못하도록 보호하여 규정 준수 요구 사항을 충족.
    * **Governance 모드와 Compliance 모드**  
    두 가지 모드로 객체의 보존 기간을 설정하고 보호할 수 있음.
* **MFA Delete**
    * **다중 요소 인증 삭제**  
    버킷 소유자가 객체를 삭제할 때 다중 요소 인증(MFA)을 요구. 이를 통해 중요한 데이터를 실수로 삭제하는 것을 방지할 수 있음.

## Summary

* Amazon S3는 데이터의 기밀성, 무결성, 가용성을 보장하기 위해 다양한 보안 기능을 제공.  
* IAM 정책, 버킷 정책, ACL을 통한 접근 제어.  
* 서버 및 클라이언트 측 암호화를 통한 데이터 보호.  
* 모니터링 및 로깅 기능을 통해 데이터를 안전하게 관리.  

이를 통해 S3는 다양한 보안 요구 사항을 충족하고, 데이터의 안전성을 높이는 강력한 스토리지 솔루션을 제공.