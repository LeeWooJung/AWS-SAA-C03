# [EBS Encryption](https://docs.aws.amazon.com/ebs/latest/userguide/ebs-encryption.html)

## EBS Encryption

### 설명

Amazon EBS 암호화는 EC2 인스턴스와 연결된 EBS 리소스를 위한 간단하고 직관적인 암호화 솔루션.  

Amazon EBS 암호화를 사용하면 **자체 키 관리 인프라를 구축하고 유지 관리하며 보호할 필요가 없음**.  
Amazon EBS 암호화는 암호화된 볼륨과 스냅샷을 생성할 때 AWS KMS 키를 사용.

### EBS 볼륨 암호화

암호화된 EBS 볼륨을 만들고 지원되는 인스턴스 유형에 연결하면, 볼륨 내부의 데이터, 볼륨과 인스턴스 사이를 이동하는 모든 데이터, 볼륨에서 생성된 모든 스냅샷, 그리고 그 스냅샷에서 생성된 모든 볼륨이 암호화됨.  

Amazon EBS는 산업 표준 AES-256 데이터 암호화를 사용하여 데이터 키로 볼륨을 암호화함.  
데이터 키는 AWS KMS에서 생성되고, AWS KMS 키로 암호화된 후 볼륨 정보와 함께 저장.

### 스냅샷을 이용한 암호화

1. **암호화된 스냅샷에서 새 볼륨을 생성**  
Amazon EC2는 AWS KMS를 이용하여 암호화된 데이터 키를 생성하고, 이를 볼륨 메타데이터와 함께 저장.  

2. **암호화되지 않은 스냅샷에서 암호화된 볼륨을 생성**  
스냅샷을 복사하고 ‘Copy snapshot’ 작업을 선택하여 새로운 암호화된 스냅샷을 만들 수 있음. 

암호화된 볼륨이나 스냅샷을 사용할 때, AWS KMS 키의 상태가 중요. KMS 키를 사용할 수 없게 되면, 암호화 작업에서 KMS 키를 사용하려는 모든 요청이 실패함.  
따라서, KMS 키 관리는 EBS 볼륨과 스냅샷의 암호화에 있어 중요한 부분임.

### 이미 생성된 EBS 볼륨을 암호화

1. 스냅샷 생성
2. 생성된 스냅샷을 암호화
3. 해당 스냅샷을 이용하여 암호화된 EBS 볼륨 생성
4. EC2 인스턴스 중지
5. 암호화된 볼륨으로 교체
6. EC2 인스턴스 재시작