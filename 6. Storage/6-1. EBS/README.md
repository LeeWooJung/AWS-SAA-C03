# [EBS](https://docs.aws.amazon.com/ebs/latest/userguide/what-is-ebs.html)

## <img src = "https://github.com/LeeWooJung/AWS-SAA-C03/assets/31682438/9e4b8498-3487-4c4a-abed-eccaafa7c8e2" width = "20" height = "20"> EBS

* **EBS**(Elastic Block Storage)  
Amazon Elastic Block Store (EBS)는 Amazon EC2 인스턴스에 사용하기 쉬운 고성능 블록 스토리지 서비스임.  
EBS를 사용하면 스토리지 볼륨을 만들어 Amazon [EC2 인스턴스](https://github.com/LeeWooJung/AWS-SAA-C03/tree/main/3.%20EC2)에 연결할 수 있음. 볼륨을 연결한 후에는 해당 볼륨 위에 **파일 시스템**을 생성하거나,  **블록 스토리지**를 사용하거나 **데이터베이스**를 실행하는 것과 같은 방식으로 사용할 수 있음.

### 특징
1. EBS 볼륨은 **특정 가용 영역**에 위치하며 자동으로 복제되므로, 단일 구성 요소에 장애가 발생하더라도 안전하게 보호됨.  
모든 EBS 볼륨 유형은 안정적인 스냅샷 기능을 제공하며 높은 가용성을 제공하도록 설계되었음

2. EBS는 워크로드에 대한 스토리지 성능과 비용을 최적화할 수 있는 다양한 옵션을 제공.
* 데이터베이스 및 부트 볼륨과 같은 트랜잭션 워크로드를 위한 **SSD 지원 스토리지** (주로 IOPS가 성능을 좌우)
* MapReduce 및 로그 처리와 같은 처리량 집약적 워크로드를 위한 **HDD 지원 스토리지** (주로 초당 MB가 성능을 좌우)

3. EBS는 또한 탄력적 볼륨이라는 기능을 제공함. 이 기능을 사용하면 가동 중단이나 성능 저하 없이 용량을 동적으로 늘리고, 성능을 튜닝하며, 라이브 볼륨의 유형을 변경할 수 있음.

4. 스냅샷 기능  
EBS는 데이터의 특정 시점 백업을 만드는 데 유용한 스냅샷 기능도 지원

5. EBS 최적화 인스턴스  
소액의 시간당 요금을 추가로 지불한 고객은 특정 Amazon EC2 인스턴스 유형을 EBS 최적화 인스턴스로 시작할 수 있음.  
EBS 최적화 인스턴스를 사용하면 EC2 인스턴스에서 EBS 볼륨에 프로비저닝된 IOPS를 십분 활용할 수 있음

## EBS 볼륨 유형
* **General Purpose SSD (gp2, gp3)**  
가격과 성능을 균형 잡히게 제공하며, 트랜잭션 워크로드에 적합함.  
예를 들어, 가상 데스크톱, 테스트 및 개발 환경, 대화형 게임 애플리케이션 등에 사용될 수 있음.

* **Provisioned IOPS SSD (io1, io2)**  
I/O 집약적인 애플리케이션에 필요한 고성능을 제공함.  
예를 들어, Oracle, SAP HANA, Microsoft SQL Server, IBM DB2 등의 미션 크리티컬한 애플리케이션에 사용될 수 있음.

* **Throughput Optimized HDD (st1)**  
자주 접근되는 처리량 집약적 워크로드에 적합함.  
예를 들어, MapReduce, Kafka, 로그 처리, 데이터 웨어하우스, ETL 워크로드 등에 사용될 수 있음.

* **Cold HDD (sc1)**  
이 볼륨 유형은 자주 접근되지 않는 데이터에 대한 가장 저렴한 비용을 제공함.  
예를 들어, 장기 보관 데이터나 백업 데이터 등에 사용될 수 있음.

## EBS Snapshot

EBS 스냅샷은 Amazon EBS 볼륨의 특정 시점의 데이터를 백업하는 방법.  
스냅샷은 **증분 백업**으로, 가장 최근 스냅샷 이후에 변경된 블록만 저장함. 이는 스냅샷 생성 시간을 최소화하고 데이터 중복을 피함으로써 저장 비용을 절약함.  
스냅샷은 **Amazon S3**에 저장되며, 이는 사용자가 직접 액세스할 수 없는 S3 버킷에 저장됨.  
스냅샷을 생성하고 관리하기 위해 Amazon EC2 콘솔 또는 Amazon EC2 API를 사용할 수 있음.

### Snapshot 유형
1. **Application-consistent snapshots**  
 Windows 인스턴스에 연결된 모든 EBS 볼륨의 애플리케이션 일관성 스냅샷을 생성할 수 있음. 스냅샷 프로세스는 Windows Volume Shadow Copy Service (VSS)를 사용하여 VSS 인식 애플리케이션의 이미지 수준 백업을 받음. 이는 애플리케이션과 디스크 사이에 대기 중인 트랜잭션에서 전송되는 데이터를 포함함.

2. **Multi-volume snapshots**  
대규모 데이터베이스 또는 여러 EBS 볼륨에 걸쳐 있는 파일 시스템과 같은 중요한 **워크로드의 백업**을 생성하는 데 사용될 수 있음.  
다중 볼륨 스냅샷을 통해 EC2 인스턴스에 연결된 여러 EBS 볼륨에서 정확한 특정 시점, 데이터 조정 및 충돌 일관성 스냅샷을 생성할 수 있음.

### Snapshot 특징
1. **백업**  
EBS 스냅샷은 Amazon EBS 볼륨의 특정 시점의 데이터를 **복사하여 백업**하는 역할을 함.  
이는 데이터 복구 전략에서 중요한 역할을 하며, 다른 EBS 볼륨 또는 다른 AWS 지역으로 데이터를 복원하는 데 사용할 수 있음.  
스냅샷은 증분식 백업이므로 가장 최근 스냅샷 이후에 변경된 디바이스의 블록만 저장됨. 이렇게 하면 스냅샷을 만드는 데 필요한 시간이 최소화되며 데이터를 복제하지 않아 스토리지 비용이 절약됨.

2. **아카이빙**  
EBS 스냅샷 아카이브는 자주 액세스하지 않고 빠르게 검색할 필요가 없는 스냅샷을 **장기간 저렴하게 저장할 수 있는 새로운 스토리지 계층**임.  
스냅샷을 아카이브하면, 증분 스냅샷이 전체 스냅샷으로 변환되고, 표준 계층에서 아카이브 계층으로 이동. 아카이브된 스냅샷이 필요할 때는 아카이브 계층에서 표준 계층으로 복원할 수 있음.

3. **EBS 스냅샷 휴지통**  
EBS 스냅샷 휴지통은 실수로 삭제된 EBS 스냅샷을 복원할 수 있도록 하는 데이터 복구 기능.  
스냅샷이 삭제되면, 사용자가 지정한 기간 동안 휴지통에 보관되어 영구적으로 삭제되기 전에 복원할 수 있음. 휴지통에서 리소스를 복원하면, 휴지통에서 리소스가 제거되고 사용자는 계정의 다른 리소스와 동일한 방식으로 사용할 수 있음.

4. **빠른 스냅샷 복원**(Fast Snapshot Restore, **FSR**)  
스냅샷에서 볼륨을 생성할 때 완전히 초기화된 볼륨을 생성할 수 있게 해줌.  
이로 인해 블록이 처음 액세스될 때 I/O 작업의 지연 시간이 없어짐.  
빠른 스냅샷 복원을 사용하여 생성된 볼륨은 모든 프로비저닝된 성능을 즉시 제공함.

### Snapshot을 이용한 다른 AZ로의 EBS 복원 방법

1. 스냅샷에서 새 볼륨을 생성.
2. 새 볼륨을 원하는 EC2 인스턴스에 연결(EBS, EC2 인스턴스가 같은 가용 영역에 존재해야 함)
3. 인스턴스 내에서 해당 볼륨을 마운트.

## EBS Attachment

EBS는 같은 가용 영역(AZ)에 존재하는 EC2 인스턴스에 Attach 가능.  


**EBS : EC2 인스턴스 = N : 1**로 연결 가능

### EBS Architecture

![EBS architecture](https://github.com/LeeWooJung/AWS-SAA-C03/assets/31682438/dbbcbcbf-c418-4a1e-84a8-9043302b2794)

